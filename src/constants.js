'use strict';

/**
 * @param {string[]} arr
 * @returns {Object<string, string>}
 */
function keyMirror(arr) {
  const tmp = {};
  for (const value of arr) {
    tmp[value] = value;
  }
  return tmp;
}

exports.browser = typeof window !== 'undefined';

exports.RPCCommands = keyMirror([
  'ACCEPT_ACTIVITY_INVITE',
  'ACTIVITY_INVITE_USER',
  'AUTHENTICATE',
  'AUTHORIZE',
  'BRAINTREE_POPUP_BRIDGE_CALLBACK',
  'BROWSER_HANDOFF',
  'CAPTURE_SHORTCUT',
  'CLOSE_ACTIVITY_JOIN_REQUEST',
  'CONNECTIONS_CALLBACK',
  'CONNECT_TO_LOBBY',
  'CONNECT_TO_LOBBY_VOICE',
  'CREATE_CHANNEL_INVITE',
  'CREATE_LOBBY',
  'DEEP_LINK',
  'DELETE_LOBBY',
  'DISCONNECT_FROM_LOBBY',
  'DISCONNECT_FROM_LOBBY_VOICE',
  'DISPATCH',
  'GET_APPLICATION_TICKET',
  'GET_CHANNEL',
  'GET_CHANNELS',
  'GET_ENTITLEMENTS',
  'GET_ENTITLEMENT_TICKET',
  'GET_GUILD',
  'GET_GUILDS',
  'GET_IMAGE',
  'GET_NETWORKING_CONFIG',
  'GET_RELATIONSHIPS',
  'GET_SELECTED_VOICE_CHANNEL',
  'GET_SKUS',
  'GET_USER',
  'GET_USER_ACHIEVEMENTS',
  'GET_VOICE_SETTINGS',
  'GIFT_CODE_BROWSER',
  'GUILD_TEMPLATE_BROWSER',
  'INVITE_BROWSER',
  'NETWORKING_CREATE_TOKEN',
  'NETWORKING_PEER_METRICS',
  'NETWORKING_SYSTEM_METRICS',
  'OPEN_OVERLAY_ACTIVITY_INVITE',
  'OPEN_OVERLAY_GUILD_INVITE',
  'OPEN_OVERLAY_VOICE_SETTINGS',
  'OVERLAY',
  'SEARCH_LOBBIES',
  'SELECT_TEXT_CHANNEL',
  'SELECT_VOICE_CHANNEL',
  'SEND_ACTIVITY_JOIN_INVITE',
  'SEND_TO_LOBBY',
  'SET_ACTIVITY',
  'SET_CERTIFIED_DEVICES',
  'SET_OVERLAY_LOCKED',
  'SET_USER_ACHIEVEMENT',
  'SET_USER_VOICE_SETTINGS',
  'SET_USER_VOICE_SETTINGS_2',
  'SET_VOICE_SETTINGS',
  'SET_VOICE_SETTINGS_2',
  'START_PURCHASE',
  'SUBSCRIBE',
  'UNSUBSCRIBE',
  'UPDATE_LOBBY',
  'UPDATE_LOBBY_MEMBER',
  'VALIDATE_APPLICATION',
]);

exports.RPCEvents = keyMirror([
  'ACTIVITY_INVITE',
  'ACTIVITY_JOIN',
  'ACTIVITY_JOIN_REQUEST',
  'ACTIVITY_SPECTATE',
  'CAPTURE_SHORTCUT_CHANGE',
  'CHANNEL_CREATE',
  'CURRENT_USER_UPDATE',
  'ENTITLEMENT_CREATE',
  'ENTITLEMENT_DELETE',
  'ERROR',
  'GAME_JOIN',
  'GAME_SPECTATE',
  'GUILD_CREATE',
  'GUILD_STATUS',
  'LOBBY_DELETE',
  'LOBBY_MEMBER_CONNECT',
  'LOBBY_MEMBER_DISCONNECT',
  'LOBBY_MEMBER_UPDATE',
  'LOBBY_MESSAGE',
  'LOBBY_UPDATE',
  'MESSAGE_CREATE',
  'MESSAGE_DELETE',
  'MESSAGE_UPDATE',
  'NOTIFICATION_CREATE',
  'OVERLAY',
  'OVERLAY_UPDATE',
  'READY',
  'RELATIONSHIP_UPDATE',
  'SPEAKING_START',
  'SPEAKING_STOP',
  'USER_ACHIEVEMENT_UPDATE',
  'VOICE_CHANNEL_SELECT',
  'VOICE_CONNECTION_STATUS',
  'VOICE_SETTINGS_UPDATE',
  'VOICE_SETTINGS_UPDATE_2',
  'VOICE_STATE_CREATE',
  'VOICE_STATE_DELETE',
  'VOICE_STATE_UPDATE',
]);

exports.RPCErrors = {
  UNKNOWN_ERROR: 1000,
  SERVICE_UNAVAILABLE: 1001,
  TRANSACTION_ABORTED: 1002,
  INVALID_PAYLOAD: 4000,
  INVALID_COMMAND: 4002,
  INVALID_GUILD: 4003,
  INVALID_EVENT: 4004,
  INVALID_CHANNEL: 4005,
  INVALID_PERMISSIONS: 4006,
  INVALID_CLIENTID: 4007,
  INVALID_ORIGIN: 4008,
  INVALID_TOKEN: 4009,
  INVALID_USER: 4010,
  INVALID_INVITE: 4011,
  INVALID_ACTIVITY_JOIN_REQUEST: 4012,
  INVALID_LOBBY: 4013,
  INVALID_LOBBY_SECRET: 4014,
  INVALID_ENTITLEMENT: 4015,
  INVALID_GIFT_CODE: 4016,
  OAUTH2_ERROR: 5000,
  SELECT_CHANNEL_TIMED_OUT: 5001,
  GET_GUILD_TIMED_OUT: 5002,
  SELECT_VOICE_FORCE_REQUIRED: 5003,
  CAPTURE_SHORTCUT_ALREADY_LISTENING: 5004,
  INVALID_ACTIVITY_SECRET: 5005,
  NO_ELIGIBLE_ACTIVITY: 5006,
  LOBBY_FULL: 5007,
  PURCHASE_CANCELED: 5008,
  PURCHASE_ERROR: 5009,
  UNAUTHORIZED_FOR_ACHIEVEMENT: 5010,
  RATE_LIMITED: 5011,
};

exports.RPCCloseCodes = {
  CLOSE_NORMAL: 1000,
  CLOSE_UNSUPPORTED: 1003,
  CLOSE_ABNORMAL: 1006,
  INVALID_CLIENTID: 4000,
  INVALID_ORIGIN: 4001,
  RATELIMITED: 4002,
  TOKEN_REVOKED: 4003,
  INVALID_VERSION: 4004,
  INVALID_ENCODING: 4005,
};

exports.LobbyTypes = {
  PRIVATE: 1,
  PUBLIC: 2,
};

exports.RelationshipTypes = {
  NONE: 0,
  FRIEND: 1,
  BLOCKED: 2,
  PENDING_INCOMING: 3,
  PENDING_OUTGOING: 4,
  IMPLICIT: 5,
};
